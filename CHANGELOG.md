# Changelog

Все значимые изменения в этом проекте будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
и этот проект следует [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Changed
- **BREAKING**: Роль теперь использует `geerlingguy.docker` для установки Docker вместо ручной установки
- Удалены задачи установки Docker из `prepare.yml` - теперь это обрабатывается зависимостью
- Добавлены переменные конфигурации Docker для совместимости с `geerlingguy.docker`
- Обновлена документация для отражения новой архитектуры зависимостей

### Added
- Автоматическая зависимость от роли `geerlingguy.docker >= 7.0.0`
- Новые переменные для конфигурации Docker через geerlingguy роль
- Файл `requirements.yml` для управления внешними зависимостями
- Пример playbook `docker-configuration.yml` демонстрирующий настройку Docker

### Fixed
- Улучшена надежность установки Docker за счет использования проверенной роли

## [1.0.0] - 2024-12-19

### Added
- Роль `ollama` для развертывания Ollama с использованием Docker
- Поддержка Ubuntu 24.04, 22.04, 20.04
- Автоматическая установка Docker и зависимостей
- Поддержка NVIDIA GPU с автоматической установкой nvidia-container-toolkit
- Гибкая конфигурация Docker volumes (managed volumes или host directories)
- Предварительная загрузка моделей через API
- Настройка ресурсов контейнера (память, CPU)
- Опции безопасности для контейнера
- Обработчики для управления контейнером и Docker службой
- Комплексные тесты Molecule с двумя сценариями:
  - Docker контейнеры для быстрого тестирования
  - Proxmox VMs для полноценного тестирования
- Подробная документация на русском языке
- Примеры inventory и playbooks
- CI/CD готовые конфигурации для GitHub Actions и GitLab CI

### Features
- **Автоматическая установка**: Полностью автоматизированная установка Docker и всех зависимостей
- **GPU поддержка**: Автоматическая настройка NVIDIA GPU поддержки
- **Гибкие volumes**: Выбор между Docker managed volumes и host directories
- **Предварительная загрузка моделей**: Автоматическая загрузка указанных моделей
- **Мониторинг**: Автоматическая проверка работоспособности API
- **Безопасность**: Настройки безопасности контейнера
- **Тестирование**: Полное покрытие тестами с Molecule
- **Документация**: Подробная документация на русском языке

### Configuration Options
- `ollama_version`: Версия Docker образа (по умолчанию: "latest")
- `ollama_enable_gpu`: Включение GPU поддержки (по умолчанию: false)
- `ollama_use_host_volumes`: Использование host directories (по умолчанию: false)
- `ollama_preload_models`: Список моделей для загрузки (по умолчанию: [])
- `ollama_memory_limit`: Ограничение памяти (по умолчанию: "4g")
- `ollama_cpus`: Количество CPU (по умолчанию: "2.0")
- `ollama_port`: Порт API (по умолчанию: 11434)
- И многие другие опции конфигурации

### Testing
- Molecule тесты с Docker для быстрой проверки
- Molecule тесты с Proxmox для полноценного тестирования
- Автоматическая проверка установки Docker
- Проверка работоспособности контейнера Ollama
- Тестирование API endpoints
- Проверка загрузки моделей
- Тестирование генерации текста

### Documentation
- Полная документация коллекции на русском языке
- Подробная документация роли с примерами
- Руководство по тестированию с Molecule
- Примеры конфигураций для различных сценариев
- Troubleshooting руководство

### Examples
- Базовое развертывание
- Развертывание с GPU поддержкой
- Конфигурация с host volumes
- Предварительная загрузка моделей
- Полная конфигурация для продакшена

[Unreleased]: https://github.com/community/ollama-ansible-collection/compare/v1.0.0...HEAD
[1.0.0]: https://github.com/community/ollama-ansible-collection/releases/tag/v1.0.0